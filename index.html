<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Chat (Realtime DB)</title>
<style>
body { font-family: Arial, sans-serif; background:#f0f2f5; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
.container { width:90%; max-width:400px; display:flex; flex-direction:column; gap:10px; }
.chat-box { background:#fff; border-radius:10px; height:400px; padding:10px; overflow-y:auto; display:flex; flex-direction:column; gap:6px; }
.message { max-width:70%; padding:8px 12px; border-radius:20px; word-wrap:break-word; }
.message.right { background:#007bff; color:#fff; align-self:flex-end; }
.message.left { background:#e0e0e0; align-self:flex-start; }
.input-container { display:flex; gap:6px; }
#chatInput { flex:1; border-radius:25px; padding:10px 15px; border:1px solid #ccc; outline:none; }
#sendBtn { border:none; border-radius:8px; padding:10px 15px; background:#007bff; color:#fff; font-weight:bold; cursor:pointer; }
</style>
</head>
<body>

<div class="container">
  <div class="chat-box" id="chatBox"></div>
  <div class="input-container">
    <input type="text" id="chatInput" placeholder="Type a message...">
    <button id="sendBtn">SEND</button>
  </div>
</div>

<!-- Firebase Realtime Database -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyA2AScPQkOE632znM9vvCahijtnronS3jU",
    authDomain: "fresherscuplive.firebaseapp.com",
    databaseURL: "https://fresherscuplive-default-rtdb.firebaseio.com",
    projectId: "fresherscuplive",
    storageBucket: "fresherscuplive.firebasestorage.app",
    messagingSenderId: "502451588704",
    appId: "1:502451588704:web:56bd4d7fc98814cddfbd05"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const chatBox = document.getElementById('chatBox');
  const chatInput = document.getElementById('chatInput');
  const sendBtn = document.getElementById('sendBtn');

  // Send message
  sendBtn.addEventListener('click', () => {
    const msg = chatInput.value.trim();
    if(!msg) return;
    const newMsgRef = db.ref('chat').push();
    newMsgRef.set({
      message: msg,
      sender: 'me', // you can change 'me' to your name
      timestamp: Date.now()
    });
    chatInput.value = '';
  });

  // Enter key sends message
  chatInput.addEventListener('keypress', e => {
    if(e.key === 'Enter') sendBtn.click();
  });

  // Listen for new messages
  db.ref('chat').on('value', snapshot => {
    chatBox.innerHTML = '';
    const data = snapshot.val();
    if(data){
      Object.keys(data).forEach(key => {
        const msgData = data[key];
        const msgEl = document.createElement('div');
        msgEl.textContent = msgData.message;
        msgEl.className = "message " + (msgData.sender === 'me' ? 'right' : 'left');
        chatBox.appendChild(msgEl);
        chatBox.scrollTop = chatBox.scrollHeight;
      });
    }
  });
</script>

</body>
</html>
