<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Department Live Match</title>
<style>
body { margin:0; padding:0; font-family: Arial, sans-serif; background:#f0f2f5; display:flex; flex-direction:column; align-items:center; }
.container { width:95%; max-width:600px; margin-top:20px; display:flex; flex-direction:column; gap:12px; }
.scoreboard { background:#fff; border-radius:12px; padding:15px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
.match-status { text-align:center; font-size:14px; color:#007bff; font-weight:bold; margin-bottom:10px; }
.match-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.team { display:flex; flex-direction:column; align-items:center; width:90px; cursor:pointer; }
.team-logo { width:40px; height:40px; object-fit:contain; border-radius:50%; margin-bottom:4px; transition: transform 0.3s; }
.team-name { font-weight:bold; font-size:14px; text-align:center; }
.score { font-size:36px; font-weight:bold; text-align:center; width:100px; }
.center-line { position:relative; height:2px; background:#e0e0e0; margin:12px 0; }
.center-line::before { content:"âš½"; position:absolute; top:-10px; left:50%; transform:translateX(-50%); background:#fff; padding:0 6px;}
.goal-scorers { display:flex; justify-content:space-between; font-size:12px; color:#555; margin-bottom:5px;}
.goal-scorers div { width:90px; text-align:center; }
#fullDetailsBtn { padding:8px; border:none; border-radius:8px; background:#007bff; color:#fff; font-weight:bold; cursor:pointer; width:100%; }
.chat-container { background:#fff; border-radius:12px; height:300px; padding:10px; overflow-y:auto; display:flex; flex-direction:column; gap:6px; }
.message { max-width:70%; padding:8px 12px; border-radius:20px; word-wrap:break-word; }
.message.right { background:#007bff; color:#fff; align-self:flex-end; }
.message.left { background:#e0e0e0; align-self:flex-start; }
.input-container { display:flex; gap:6px; margin-top:6px; align-items:center; }
#chatInput { flex:1; border-radius:25px; padding:10px 15px; border:1px solid #ccc; outline:none; font-size:16px; }
#sendBtn { border:none; background:#007bff; border-radius:8px; padding:10px 15px; color:#fff; font-weight:bold; cursor:pointer; }
</style>
</head>
<body>

<div class="container">

  <div class="scoreboard">
    <div class="match-status" id="matchStatus">Live 60'</div>
    <div class="match-header">
      <div class="team">
        <img class="team-logo" id="team1Logo" src="https://pngimg.com/uploads/manchester_united/manchester_united_PNG21.png" alt="Man Utd">
        <div class="team-name" id="team1Name">Man Utd</div>
      </div>
      <div class="score" id="scoreBoard">2 : 1</div>
      <div class="team">
        <img class="team-logo" id="team2Logo" src="https://upload.wikimedia.org/wikipedia/en/0/0c/Liverpool_FC.svg" alt="Liverpool">
        <div class="team-name" id="team2Name">Liverpool</div>
      </div>
    </div>
    <div class="center-line"></div>
    <div class="goal-scorers">
      <div id="team1Scorers">K.Harbert 36'</div>
      <div id="team2Scorers">S.Mane 65'</div>
    </div>
  </div>

  <button id="fullDetailsBtn">FULL MATCH DETAILS</button>

  <div class="chat-container" id="chatBox"></div>

  <div class="input-container">
    <input type="text" id="chatInput" placeholder="Type a message...">
    <button id="sendBtn">SEND</button>
  </div>

</div>

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js"></script>
<script>
  // New Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyBIUCbVIqFWIvas2DQI77TRdNEg4xvnkS8",
    authDomain: "cpefootball-934ed.firebaseapp.com",
    projectId: "cpefootball-934ed",
    storageBucket: "cpefootball-934ed.firebasestorage.app",
    messagingSenderId: "314240530293",
    appId: "1:314240530293:web:1c89774cda136f4661c53c"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const chatBox = document.getElementById('chatBox');
  const chatInput = document.getElementById('chatInput');
  const sendBtn = document.getElementById('sendBtn');

  // Listen for chat messages
  db.collection('chat').orderBy('timestamp')
    .onSnapshot(snapshot => {
      chatBox.innerHTML = '';
      snapshot.forEach(docSnap => {
        const data = docSnap.data();
        const msgEl = document.createElement('div');
        msgEl.textContent = data.message;
        msgEl.className = "message " + (data.sender==='me'?'right':'left');

        // Long press delete
        let pressTimer;
        msgEl.addEventListener('mousedown', ()=>{
          pressTimer = setTimeout(()=>{
            if(confirm("Delete this message?")) {
              db.collection('chat').doc(docSnap.id).delete();
            }
          }, 800);
        });
        msgEl.addEventListener('mouseup', ()=>clearTimeout(pressTimer));
        msgEl.addEventListener('mouseleave', ()=>clearTimeout(pressTimer));

        chatBox.appendChild(msgEl);
        chatBox.scrollTop = chatBox.scrollHeight;
      });
    });

  // Send message
  sendBtn.addEventListener('click', ()=>{
    const msg = chatInput.value.trim();
    if(!msg) return;
    db.collection('chat').add({
      message: msg,
      timestamp: Date.now(),
      sender: 'me'
    });
    chatInput.value='';
  });

  // Enter key sends message
  chatInput.addEventListener('keypress', e=>{
    if(e.key==='Enter') sendBtn.click();
  });

  // Full match details
  document.getElementById('fullDetailsBtn').addEventListener('click', ()=>{
    alert("Full match timeline and events would appear here.");
  });
</script>

</body>
</html>
