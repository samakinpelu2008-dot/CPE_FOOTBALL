<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Department Live Score</title>
<style>
body { font-family: Arial, sans-serif; margin:0; text-align:center; overflow:hidden; }
.scoreboard { background:#f5f5f5; padding:20px; font-size:24px; display:flex; justify-content:space-between; align-items:center; }
.chat { width:80%; height:200px; margin:20px auto; border:1px solid #ccc; overflow-y:auto; padding:10px; }
.message { display:flex; justify-content:space-between; margin:5px 0; }
button { padding:5px 10px; margin-left:5px; cursor:pointer; }
.details-btn, .admin-btn { padding:10px 20px; margin:10px; }
.timeline-popup { position:fixed; top:20%; left:20%; width:60%; background:white; border:2px solid black; padding:20px; z-index:10; max-height:400px; overflow-y:auto; display:none; }
.admin-panel { position:fixed; top:0; right:0; width:300px; height:100%; background:#ddd; padding:10px; overflow-y:auto; display:none; }
</style>
</head>
<body>

<!-- Scoreboard -->
<div class="scoreboard">
  <span id="teamA">Team A</span> <span id="scoreA">0</span> - <span id="scoreB">0</span> <span id="teamB">Team B</span>
  <button id="likeGame">‚ù§Ô∏è <span id="gameLikes">0</span></button>
</div>

<!-- Chat -->
<div class="chat" id="chat"></div>
<input type="text" id="chatInput" placeholder="Type message...">
<button onclick="sendMessage()">Send</button>

<!-- Full Details -->
<button class="details-btn" onclick="toggleDetails()">FULL DETAILS</button>
<div class="timeline-popup" id="timelinePopup">
  <button onclick="toggleDetails()">Close</button>
  <ul id="timelineList"></ul>
</div>

<!-- Admin -->
<button class="admin-btn" onclick="adminLogin()">Admin</button>
<div class="admin-panel" id="adminPanel">
  <h2>Admin Panel</h2>

  <h3>Team Settings</h3>
  <input placeholder="Team A Name" id="teamAInput"><br>
  <input placeholder="Team B Name" id="teamBInput"><br>
  <button onclick="updateTeams()">Update Teams</button>

  <h3>Timeline Event</h3>
  <input placeholder="Player Name" id="playerInput"><br>
  <select id="eventType">
    <option value="goal">Goal</option>
    <option value="yellow">Yellow Card</option>
    <option value="red">Red Card</option>
  </select><br>
  <button onclick="addEvent()">Add Event</button>

  <button style="background:red; color:white;" onclick="resetAll()">RESET ALL</button>
</div>

<script>
let scoreA = 0, scoreB = 0, gameLikes = 0;
let chatMessages = [];
let timeline = [];

function updateScoreboard() {
  document.getElementById("scoreA").innerText = scoreA;
  document.getElementById("scoreB").innerText = scoreB;
  document.getElementById("gameLikes").innerText = gameLikes;
}

function sendMessage() {
  const text = document.getElementById("chatInput").value;
  if(!text) return;
  const msg = {text: text, likes:0};
  chatMessages.push(msg);
  renderChat();
  document.getElementById("chatInput").value = "";
}

function renderChat() {
  const chatDiv = document.getElementById("chat");
  chatDiv.innerHTML = "";
  chatMessages.forEach((msg, index) => {
    const div = document.createElement("div");
    div.className = "message";
    div.innerHTML = `<span>${msg.text}</span> <span>
      <button onclick="likeMessage(${index})">‚ù§Ô∏è ${msg.likes}</button>
      <button onclick="deleteMessage(${index})">üóëÔ∏è</button>
    </span>`;
    chatDiv.appendChild(div);
  });
}

function likeMessage(index) { chatMessages[index].likes++; renderChat(); }
function deleteMessage(index) { if(confirm("Delete this message?")) { chatMessages.splice(index,1); renderChat(); } }

document.getElementById("likeGame").onclick = () => { gameLikes++; updateScoreboard(); }

function toggleDetails() {
  const popup = document.getElementById("timelinePopup");
  popup.style.display = popup.style.display==="none"?"block":"none";
  renderTimeline();
}

function addEvent() {
  const player = document.getElementById("playerInput").value;
  const type = document.getElementById("eventType").value;
  if(!player) return;
  const time = new Date().getMinutes();
  timeline.push({player,type,time});
  if(type==="goal"){
    if(player.toLowerCase().includes(document.getElementById("teamA").innerText.toLowerCase())) scoreA++;
    else scoreB++;
    updateScoreboard();
  }
  renderTimeline();
  document.getElementById("playerInput").value = "";
}

function renderTimeline() {
  const list = document.getElementById("timelineList");
  list.innerHTML="";
  timeline.forEach(ev=>{
    let icon="";
    if(ev.type==="goal") icon="‚öΩ";
    if(ev.type==="yellow") icon="üü®";
    if(ev.type==="red") icon="üü•";
    const li = document.createElement("li");
    li.innerText=`${icon} ${ev.player} ${ev.time}'`;
    list.appendChild(li);
  });
}

function adminLogin() {
  const pwd = prompt("Enter Admin Password");
  if(pwd==="CPE2026"){
    document.getElementById("adminPanel").style.display="block";
  } else alert("Wrong Password");
}

function updateTeams() {
  const a = document.getElementById("teamAInput").value;
  const b = document.getElementById("teamBInput").value;
  if(a) document.getElementById("teamA").innerText=a;
  if(b) document.getElementById("teamB").innerText=b;
}

function resetAll() {
  if(confirm("Reset everything?")){
    scoreA=0; scoreB=0; gameLikes=0;
    chatMessages=[]; timeline=[];
    updateScoreboard(); renderChat(); renderTimeline();
  }
}

updateScoreboard();
</script>

</body>
</html>
