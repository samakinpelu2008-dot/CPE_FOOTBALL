<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Match & Chat</title>
<style>
body {
  margin:0; padding:0; font-family: Arial, sans-serif; 
  background: #e6f0ff; display:flex; flex-direction:column; align-items:center;
}
.container {
  width:95%; max-width:600px; margin-top:20px; display:flex; flex-direction:column; gap:12px;
}
/* Scoreboard */
.scoreboard {
  background:#fff; border-radius:12px; padding:15px; box-shadow:0 4px 10px rgba(0,0,0,0.1);
  position:relative;
}
.match-status { text-align:center; font-size:14px; color:#007bff; font-weight:bold; margin-bottom:10px; }
.match-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.team {
  display:flex; flex-direction:column; align-items:center; width:90px; cursor:pointer; position:relative;
}
.team-logo { width:50px; height:50px; object-fit:contain; border-radius:50%; margin-bottom:4px; transition: transform 0.3s; }
.team-name { font-weight:bold; font-size:14px; text-align:center; }
.score { font-size:36px; font-weight:bold; text-align:center; width:100px; }
.center-line { position:relative; height:2px; background:#e0e0e0; margin:12px 0; }
.center-line::before { content:"âš½"; position:absolute; top:-10px; left:50%; transform:translateX(-50%); background:#fff; padding:0 6px;}
.goal-scorers { display:flex; justify-content:space-between; font-size:12px; color:#555; margin-bottom:5px;}
.goal-scorers div { width:90px; text-align:center; }
/* Winner glow hexagon */
.glow-hex {
  position:absolute; top:0; left:50%; transform:translateX(-50%) scale(0);
  width:70px; height:70px; background:rgba(0,123,255,0.2); clip-path:polygon(25% 5%,75% 5%,100% 50%,75% 95%,25% 95%,0% 50%);
  border-radius:12px; transition: transform 0.5s ease;
  z-index:-1;
}
.pop-logo { transform: scale(1.3); transition: transform 0.3s; }

button { cursor:pointer; }
#fullDetailsBtn, #penaltyBtn, #startHalfBtn, #resetBtn, #goalBtn {
  padding:8px; border:none; border-radius:8px; background:#007bff; color:#fff; font-weight:bold; cursor:pointer; width:100%;
  margin-top:6px;
}

/* Chat */
.chat-container { background:#fff; border-radius:12px; height:300px; padding:10px; overflow-y:auto; display:flex; flex-direction:column; gap:6px; }
.message { max-width:70%; padding:8px 12px; border-radius:20px; word-wrap:break-word; }
.message.right { background:#007bff; color:#fff; align-self:flex-end; }
.message.left { background:#e0e0e0; align-self:flex-start; }

.input-container { display:flex; gap:6px; margin-top:6px; align-items:center; }
#chatInput { flex:1; border-radius:25px; padding:10px 15px; border:1px solid #ccc; outline:none; font-size:16px; }
#sendBtn { border:none; background:#007bff; border-radius:8px; padding:10px 15px; color:#fff; font-weight:bold; cursor:pointer; }

/* Admin panel hidden initially */
#adminPanel { display:none; flex-direction:column; gap:6px; margin-top:10px; }
#adminPanel input { padding:6px; border-radius:6px; border:1px solid #ccc; width:100%; }
</style>
</head>
<body>

<div class="container">

  <!-- Scoreboard -->
  <div class="scoreboard">
    <div class="match-status" id="matchStatus">Pre-match</div>
    <div class="match-header">
      <div class="team">
        <div class="glow-hex" id="team1Glow"></div>
        <img class="team-logo" id="team1Logo" src="" alt="Team 1">
        <div class="team-name" id="team1Name">Team 1</div>
      </div>
      <div class="score" id="scoreBoard">0 : 0</div>
      <div class="team">
        <div class="glow-hex" id="team2Glow"></div>
        <img class="team-logo" id="team2Logo" src="" alt="Team 2">
        <div class="team-name" id="team2Name">Team 2</div>
      </div>
    </div>
    <div class="center-line"></div>
    <div class="goal-scorers">
      <div id="team1Scorers"></div>
      <div id="team2Scorers"></div>
    </div>
  </div>

  <!-- Full match details & Penalty -->
  <button id="fullDetailsBtn">FULL MATCH DETAILS</button>
  <button id="penaltyBtn">PENALTY SHOOTOUT</button>

  <!-- Chat -->
  <div class="chat-container" id="chatBox"></div>
  <div class="input-container">
    <input type="text" id="chatInput" placeholder="Type a message...">
    <button id="sendBtn">SEND</button>
  </div>

  <!-- Admin login -->
  <div class="input-container">
    <input type="password" id="adminPassword" placeholder="Enter admin password">
    <button id="adminLoginBtn">LOGIN</button>
  </div>

  <!-- Admin panel -->
  <div id="adminPanel">
    <input type="text" id="team1NameInput" placeholder="Team 1 Name">
    <input type="text" id="team2NameInput" placeholder="Team 2 Name">
    <input type="text" id="team1LogoInput" placeholder="Team 1 Logo URL">
    <input type="text" id="team2LogoInput" placeholder="Team 2 Logo URL">
    <button id="updateTeamsBtn">Update Teams</button>
    <input type="number" id="halfDuration" placeholder="Minutes per half">
    <button id="startHalfBtn">Start Half</button>
    <input type="text" id="goalScorerName" placeholder="Goal Scorer Name">
    <button id="goalBtn">Add Goal</button>
    <button id="resetBtn">RESET MATCH</button>
  </div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyA2AScPQkOE632znM9vvCahijtnronS3jU",
  authDomain: "fresherscuplive.firebaseapp.com",
  databaseURL: "https://fresherscuplive-default-rtdb.firebaseio.com",
  projectId: "fresherscuplive",
  storageBucket: "fresherscuplive.firebasestorage.app",
  messagingSenderId: "502451588704",
  appId: "1:502451588704:web:56bd4d7fc98814cddfbd05"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// DOM
const chatBox = document.getElementById('chatBox');
const chatInput = document.getElementById('chatInput');
const sendBtn = document.getElementById('sendBtn');
const scoreBoard = document.getElementById('scoreBoard');
const team1Glow = document.getElementById('team1Glow');
const team2Glow = document.getElementById('team2Glow');
const team1Logo = document.getElementById('team1Logo');
const team2Logo = document.getElementById('team2Logo');
const team1Name = document.getElementById('team1Name');
const team2Name = document.getElementById('team2Name');
const team1Scorers = document.getElementById('team1Scorers');
const team2Scorers = document.getElementById('team2Scorers');
const matchStatus = document.getElementById('matchStatus');

// Admin DOM
const adminLoginBtn = document.getElementById('adminLoginBtn');
const adminPanel = document.getElementById('adminPanel');
const team1NameInput = document.getElementById('team1NameInput');
const team2NameInput = document.getElementById('team2NameInput');
const team1LogoInput = document.getElementById('team1LogoInput');
const team2LogoInput = document.getElementById('team2LogoInput');
const updateTeamsBtn = document.getElementById('updateTeamsBtn');
const halfDuration = document.getElementById('halfDuration');
const startHalfBtn = document.getElementById('startHalfBtn');
const goalScorerName = document.getElementById('goalScorerName');
const goalBtn = document.getElementById('goalBtn');
const resetBtn = document.getElementById('resetBtn');

// Firebase references
const chatRef = db.ref('chat');
const scoresRef = db.ref('scores');
const winnerRef = db.ref('winnerGlow');
const penaltyRef = db.ref('penalty');
const matchRef = db.ref('matchStatus');
const scorersRef = db.ref('goalScorers');
const teamsRef = db.ref('teams');

// --- CHAT ---
sendBtn.addEventListener('click', ()=>{
  const msg = chatInput.value.trim();
  if(!msg) return;
  chatRef.push({ message: msg, sender: 'me', timestamp: Date.now() });
  chatInput.value = '';
});
chatInput.addEventListener('keypress', e => { if(e.key==='Enter') sendBtn.click(); });
chatRef.on('value', snap=>{
  chatBox.innerHTML='';
  const data = snap.val();
  if(data){
    Object.keys(data).forEach(k=>{
      const m = data[k];
      const div = document.createElement('div');
      div.textContent = m.message;
      div.className="message "+(m.sender==='me'?'right':'left');
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    });
  }
});

// --- ADMIN LOGIN ---
adminLoginBtn.onclick = ()=>{
  if(document.getElementById('adminPassword').value==='1234'){ // admin password
    adminPanel.style.display='flex';
    alert('Admin panel unlocked');
  } else alert('Wrong password');
};

// --- UPDATE TEAMS ---
updateTeamsBtn.onclick = ()=>{
  const t1n = team1NameInput.value || 'Team 1';
  const t2n = team2NameInput.value || 'Team 2';
  const t1l = team1LogoInput.value || '';
  const t2l = team2LogoInput.value || '';
  team1Name.textContent=t1n;
  team2Name.textContent=t2n;
  if(t1l) team1Logo.src=t1l;
  if(t2l) team2Logo.src=t2l;
  teamsRef.set({team1:{name:t1n,logo:t1l},team2:{name:t2n,logo:t2l}});
};

// --- START HALF TIMER ---
let timerInterval;
startHalfBtn.onclick = ()=>{
  let mins = parseInt(halfDuration.value)||45;
  let seconds=0;
  matchStatus.textContent=`Live 0'`;
  if(timerInterval) clearInterval(timerInterval);
  timerInterval = setInterval(()=>{
    seconds++;
    if(seconds>=60){ mins++; seconds=0; }
    matchStatus.textContent=`Live ${mins}'`;
  },1000);
};

// --- ADD GOAL SCORER ---
goalBtn.onclick = ()=>{
  const name = goalScorerName.value.trim();
  if(!name) return;
  // Example: add to team1 always
  scorersRef.push({team:1,name:name,time:parseInt(matchStatus.textContent)||0});
  goalScorerName.value='';
};

// --- LISTENERS ---
// Scores
scoresRef.on('value', snap=>{
  const s = snap.val();
  if(!s) return;
  scoreBoard.textContent=`${s.team1} : ${s.team2}`;
});
// Winner glow
winnerRef.on('value', snap=>{
  const w = snap.val(); if(!w) return;
  if(w===1){ team1Glow.style.transform='translateX(-50%) scale(1)'; team1Logo.classList.add('pop-logo'); }
  else if(w===2){ team2Glow.style.transform='translateX(-50%) scale(1)'; team2Logo.classList.add('pop-logo'); }
  else{ team1Glow.style.transform='translateX(-50%) scale(1)'; team2Glow.style.transform='translateX(-50%) scale(1)'; team1Logo.classList.add('pop-logo'); team2Logo.classList.add('pop-logo'); }
});
// Goal scorers
scorersRef.on('value', snap=>{
  const data = snap.val();
  team1Scorers.textContent='';
  team2Scorers.textContent='';
  if(data){
    Object.values(data).forEach(g=>{
      if(g.team===1) team1Scorers.textContent+=`${g.name} ${g.time}'  `;
      else team2Scorers.textContent+=`${g.name} ${g.time}'  `;
    });
  }
});
</script>
</body>
</html>
