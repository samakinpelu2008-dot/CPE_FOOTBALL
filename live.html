<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Match</title>

<style>
/* ===== GENERAL ===== */
body {
  margin: 0;
  padding: 15px;
  font-family: Arial, sans-serif;
  background: #f6f7fb;
}

button {
  padding: 8px 14px;
  border: none;
  border-radius: 8px;
  background: #2563eb;
  color: white;
  cursor: pointer;
}

button:active {
  transform: scale(0.96);
}

/* ===== SCOREBOARD ===== */
.scoreboard {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: white;
  padding: 15px;
  border-radius: 14px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.team {
  text-align: center;
}

.team img {
  width: 70px;
}

.team-name {
  font-weight: bold;
  margin-top: 6px;
}

.score {
  font-size: 30px;
  font-weight: bold;
}

/* GOAL ANIMATION (1.5s) */
.goal-animate {
  animation: goalPop 1.5s ease;
}

@keyframes goalPop {
  0%   { transform: scale(1); }
  30%  { transform: scale(1.3) translateY(-6px); }
  60%  { transform: scale(0.95) translateY(4px); }
  100% { transform: scale(1); }
}

/* ===== TIMER ===== */
.timer-box {
  margin: 15px 0;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
}

/* ===== CONTROLS ===== */
.controls {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 15px;
}

/* ===== COMMENTS ===== */
.comments-box {
  background: white;
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.comments-box h3 {
  margin-top: 0;
}

.comment-input {
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
}

.comment-input input {
  flex: 1;
  padding: 8px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

.comment {
  padding: 6px 0;
  border-bottom: 1px solid #eee;
  font-size: 14px;
}

.delete {
  color: red;
  font-size: 12px;
  cursor: pointer;
  margin-left: 8px;
}

/* ===== HEARTS ===== */
.heart {
  position: fixed;
  font-size: 22px;
  animation: floatUp 1.5s ease-out forwards;
  pointer-events: none;
  z-index: 9999;
}

@keyframes floatUp {
  from { opacity: 1; transform: translateY(0); }
  to   { opacity: 0; transform: translateY(-40px); }
}
</style>
</head>

<body>

<!-- SCOREBOARD -->
<div class="scoreboard">
  <div class="team" id="teamA">
    <img src="https://via.placeholder.com/100" alt="">
    <div class="team-name">TEAM A</div>
    <div class="score" id="scoreA">0</div>
  </div>

  <div class="team" id="teamB">
    <img src="https://via.placeholder.com/100" alt="">
    <div class="team-name">TEAM B</div>
    <div class="score" id="scoreB">0</div>
  </div>
</div>

<!-- TIMER -->
<div class="timer-box">
  ⏱️ <span id="timer">00:00</span>
</div>

<!-- CONTROLS -->
<div class="controls">
  <button onclick="goal('A')">Goal Team A</button>
  <button onclick="goal('B')">Goal Team B</button>
  <button onclick="startTimer()">Start Timer</button>
  <button onclick="pauseTimer()">Pause Timer</button>
</div>

<!-- COMMENTS -->
<div class="comments-box">
  <h3>Fan Comments</h3>

  <div class="comment-input">
    <input id="commentInput" placeholder="Say something...">
    <button onclick="postComment()">Post</button>
  </div>

  <div id="comments"></div>
</div>

<script>
/* ===== USER ID (LOCAL STORAGE) ===== */
let userId = localStorage.getItem("fanId");
if (!userId) {
  userId = "fan_" + Date.now();
  localStorage.setItem("fanId", userId);
}

/* ADMIN SWITCH */
let isAdmin = false; // change to true for admin

/* ===== COMMENTS ===== */
let comments = JSON.parse(localStorage.getItem("comments")) || [];

function renderComments() {
  const box = document.getElementById("comments");
  box.innerHTML = "";

  comments.forEach((c, i) => {
    const div = document.createElement("div");
    div.className = "comment";
    div.innerHTML = `
      ${c.text}
      ${(c.userId === userId || isAdmin)
        ? `<span class="delete" onclick="deleteComment(${i})">delete</span>`
        : ""}
    `;
    box.appendChild(div);
  });

  localStorage.setItem("comments", JSON.stringify(comments));
}

function postComment() {
  const input = document.getElementById("commentInput");
  if (!input.value.trim()) return;

  comments.push({
    text: input.value,
    userId: userId
  });

  input.value = "";
  renderComments();
}

function deleteComment(index) {
  comments.splice(index, 1);
  renderComments();
}

renderComments();

/* ===== GOALS ===== */
function goal(team) {
  const scoreEl = document.getElementById(team === "A" ? "scoreA" : "scoreB");
  scoreEl.textContent = Number(scoreEl.textContent) + 1;

  const teamEl = document.getElementById(team === "A" ? "teamA" : "teamB");
  teamEl.classList.remove("goal-animate");
  void teamEl.offsetWidth; // reflow
  teamEl.classList.add("goal-animate");
}

/* ===== TIMER (SAFE) ===== */
let seconds = 0;
let timerRunning = false;
let timerInterval = null;

function startTimer() {
  if (timerRunning) return;
  timerRunning = true;

  timerInterval = setInterval(() => {
    seconds++;
    updateTimer();
  }, 1000);
}

function pauseTimer() {
  timerRunning = false;
  clearInterval(timerInterval);
}

function updateTimer() {
  const m = String(Math.floor(seconds / 60)).padStart(2, "0");
  const s = String(seconds % 60).padStart(2, "0");
  document.getElementById("timer").textContent = `${m}:${s}`;
}

/* ===== HEART REACTION (NO FREEZE) ===== */
document.body.addEventListener("pointerdown", (e) => {
  const h = document.createElement("div");
  h.className = "heart";
  h.textContent = "❤️";
  h.style.left = e.clientX + "px";
  h.style.top = e.clientY + "px";
  document.body.appendChild(h);

  setTimeout(() => h.remove(), 1500);
});
</script>

</body>
</html>
