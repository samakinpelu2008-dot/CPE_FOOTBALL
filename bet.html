<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bet Page</title>
<style>
body{margin:0; font-family:Arial,sans-serif; background:#1e1e1e; color:#fff;}
.scorecard{background:#fff; color:#000; margin:15px auto; width:40%; border-radius:12px; padding:15px; text-align:center;}
.teams-row{display:flex; justify-content:space-around; align-items:center; margin-bottom:5px;}
.team{display:flex; flex-direction:column; align-items:center;}
.team img{width:50px;height:50px;margin-bottom:5px;}
.team-name{font-weight:bold;}
.score{font-size:28px;font-weight:bold;}
.divider{height:1px; background:#e0e0e0; margin:10px 0;}
.betting-wrapper{width:80%; max-width:800px; margin:0 auto;}
.market{margin-bottom:20px;}
.market-title{font-weight:bold; margin-bottom:8px;}
.one-x-two{display:flex; justify-content:space-between;}
.odd-box{flex:1; margin:0 5px; background:#2c2c2c; text-align:center; padding:15px 0; border-radius:8px; font-weight:bold; cursor:pointer; transition:0.2s;}
.odd-box:hover{background:#444;}
.betslip{position:fixed; bottom:0; left:0; right:0; background:#2c2c2c; padding:10px; display:none; color:#fff;}
.betslip-item{margin-bottom:8px;}
.place-btn{width:100%; padding:10px; background:#0a7cff; color:#fff; border:none; border-radius:6px; font-size:16px; margin-top:5px;}
input.stake-input{width:50px; padding:5px; border-radius:4px; border:none; text-align:center; margin-left:5px;}
</style>
</head>
<body>

<div class="scorecard">
  <div class="match-time" id="matchTime">0'</div>
  <div class="teams-row">
    <div class="team">
      <img src="https://i.ibb.co/1fgXH8TQ/file-0000000097cc71f48084d870a69383b2.png">
      <div class="team-name">CPE</div>
    </div>
    <div class="score" id="score">0 - 0</div>
    <div class="team">
      <img src="https://i.ibb.co/93cfCTfC/file-00000000940871f4bce254a220506af2.png">
      <div class="team-name">BMG</div>
    </div>
  </div>
  <div class="divider"></div>
</div>

<div class="betting-wrapper">
  <div class="market">
    <div class="market-title">1X2</div>
    <div class="one-x-two">
      <div class="odd-box" data-team="CPE" data-type="1X2">CPE</div>
      <div class="odd-box" data-team="Draw" data-type="1X2">Draw</div>
      <div class="odd-box" data-team="BMG" data-type="1X2">BMG</div>
    </div>
  </div>
</div>

<div class="betslip" id="betslip">
  <div class="betslip-item" id="betInfo"></div>
  Stake: NGN <input type="number" id="stake" class="stake-input" min="1" value="100">
  <button class="place-btn" id="placeBet">Place Bet</button>
</div>

<script>
// --- Local Storage Setup ---
if(!localStorage.getItem("balance")) localStorage.setItem("balance",10000);

let selectedBet = null;
let activeBets = JSON.parse(localStorage.getItem("activeBets") || "[]");

function updateScoreboard(){
  const state = JSON.parse(localStorage.getItem("matchState") || '{"time":0,"home":0,"away":0}');
  document.getElementById("matchTime").innerText = state.time + "'";
  document.getElementById("score").innerText = state.home + " - " + state.away;
  const boxes = document.querySelectorAll(".odd-box");
  boxes.forEach(b=>{
    if(b.dataset.team === "CPE") b.innerText = `CPE\n${state.oddsHome.toFixed(2)}`;
    if(b.dataset.team === "Draw") b.innerText = `Draw\n${state.oddsDraw.toFixed(2)}`;
    if(b.dataset.team === "BMG") b.innerText = `BMG\n${state.oddsAway.toFixed(2)}`;
  });
}

setInterval(updateScoreboard,1000);

// --- Select Bet ---
document.querySelectorAll(".odd-box").forEach(box=>{
  box.addEventListener("click", ()=>{
    if(selectedBet === box){
      box.style.background="#2c2c2c";
      selectedBet=null;
    } else {
      if(selectedBet) selectedBet.style.background="#2c2c2c";
      box.style.background="#0a7cff";
      selectedBet = box;
    }
    document.getElementById("betslip").style.display = selectedBet? "block":"none";
  });
});

// --- Place Bet ---
document.getElementById("placeBet").addEventListener("click", ()=>{
  if(!selectedBet){ alert("Select a bet"); return; }
  const stake = parseInt(document.getElementById("stake").value);
  let balance = parseInt(localStorage.getItem("balance"));
  const state = JSON.parse(localStorage.getItem("matchState") || '{}');
  let currentOdd = 1;
  if(selectedBet.dataset.team==="CPE") currentOdd=state.oddsHome;
  if(selectedBet.dataset.team==="Draw") currentOdd=state.oddsDraw;
  if(selectedBet.dataset.team==="BMG") currentOdd=state.oddsAway;
  if(stake>balance){ alert("Insufficient balance"); return; }
  balance -= stake;
  localStorage.setItem("balance",balance);
  localStorage.setItem("activeBets",JSON.stringify([...activeBets,{
    team:selectedBet.dataset.team,
    stake:stake,
    originalOdd:currentOdd
  }]));
  alert("Bet placed!");
  selectedBet.style.background="#2c2c2c";
  selectedBet=null;
  document.getElementById("betslip").style.display="none";
});
</script>
</body>
</html>
