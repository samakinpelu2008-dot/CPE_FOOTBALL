<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bet Page</title>
<style>
body {
  font-family: Arial,sans-serif;
  background:#0f172a;
  color:white;
  padding:20px;
}
.match-card {
  background:#fff;
  color:#000;
  border-radius:10px;
  padding:16px;
  max-width:400px;
  margin:auto;
  box-shadow:0 10px 20px rgba(0,0,0,0.3);
}
.title {font-weight:bold;text-align:center;margin-bottom:10px;}
.odds {
  display:flex;
  justify-content:space-around;
  margin:12px 0;
}
.odds div {
  padding:10px;
  border-radius:6px;
  background:#e5e7eb;
  cursor:pointer;
  min-width:50px;
  text-align:center;
}
.odds div.selected {
  background:#0d6efd;
  color:white;
}
.bet-slip {
  margin-top:16px;
  background:#161b22;
  padding:12px;
  border-radius:8px;
  display:none;
}
.bet-slip button {
  padding:8px 12px;
  margin-top:6px;
  border:none;
  border-radius:6px;
  background:#0f5132;
  color:white;
  cursor:pointer;
}
.floating-open {
  position:fixed;
  bottom:20px;
  right:20px;
  padding:12px 16px;
  border-radius:50px;
  background:#0d6efd;
  cursor:pointer;
  font-weight:bold;
}
</style>
</head>
<body>

<div class="match-card">
  <div class="title">CPE vs BMG</div>
  <div id="timeScore" style="text-align:center;font-weight:bold;margin-bottom:10px;">13:00</div>

  <div class="odds">
    <div data-odd="2.00">1</div>
    <div data-odd="3.50">X</div>
    <div data-odd="2.50">2</div>
  </div>

  <div class="bet-slip" id="betSlip">
    <div id="selectedMarket">⚽ HOME @ 2.00</div>
    <input type="number" id="stakeInput" placeholder="Stake NGN" style="margin-top:6px;padding:6px;width:100%;border-radius:4px;border:1px solid #ccc;">
    <button onclick="placeBet()">Place Bet</button>
  </div>
</div>

<div class="floating-open" onclick="openBets()">Open Bets</div>

<script>
// MATCH SIMULATION
if(!localStorage.getItem("match")){
  localStorage.setItem("match",JSON.stringify({minute:0,homeGoals:0,awayGoals:0}));
}
let match = JSON.parse(localStorage.getItem("match"));
let time = match.minute;
let homeGoals = match.homeGoals;
let awayGoals = match.awayGoals;

// ODDS LOGIC
let oddsDivs = document.querySelectorAll('.odds div');
let selectedOdd = null;

oddsDivs.forEach(div => {
  div.addEventListener('click',()=>{
    if(selectedOdd === div){
      div.classList.remove('selected');
      selectedOdd = null;
      document.getElementById('betSlip').style.display='none';
    } else {
      oddsDivs.forEach(d=>d.classList.remove('selected'));
      div.classList.add('selected');
      selectedOdd = div;
      document.getElementById('selectedMarket').innerText = `⚽ ${div.innerText} @ ${div.dataset.odd}`;
      document.getElementById('betSlip').style.display='block';
    }
  });
});

// BET LOGIC
function placeBet(){
  let stake = parseInt(document.getElementById('stakeInput').value);
  if(!stake || !selectedOdd) return alert("Select odd and enter stake");
  let activeBets = JSON.parse(localStorage.getItem('activeBets')||"[]");
  activeBets.push({
    team:"HOME",
    market:selectedOdd.innerText,
    stake:stake,
    odd:parseFloat(selectedOdd.dataset.odd),
    status:"pre-match"
  });
  localStorage.setItem('activeBets',JSON.stringify(activeBets));
  alert("Bet placed!");
  document.getElementById('betSlip').style.display='none';
  document.getElementById('stakeInput').value='';
  oddsDivs.forEach(d=>d.classList.remove('selected'));
  selectedOdd=null;
}

// OPEN BETS
function openBets(){
  window.open('openbets.html','_blank');
}

// SIMULATION TIMER
function simulateMatch(){
  if(time === 10) homeGoals=1;
  if(time === 30) homeGoals=2;
  if(time === 60) awayGoals=1;

  let timeText;
  if(time===0) timeText="13:00";
  else if(time>=90) timeText=`FT | ${homeGoals}:${awayGoals}`;
  else timeText=`${time}' | ${homeGoals}:${awayGoals}`;
  
  document.getElementById('timeScore').innerText = timeText;
  
  match={minute:time,homeGoals,awayGoals};
  localStorage.setItem('match',JSON.stringify(match));

  if(time<90) time++;
}

setInterval(simulateMatch,1000);
</script>

</body>
</html>
