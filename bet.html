<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Department Match - Live</title>
<style>
body { font-family: Arial, sans-serif; background:#f0f0f0; margin:0; padding:0; }
.container { width: 90%; max-width: 600px; margin: 20px auto; }
.card { background: #fff; padding: 15px; margin-bottom: 20px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.2);}
.scoreboard { display:flex; justify-content:space-between; align-items:center; font-size:18px; position: relative; }
.team { text-align:center; flex:1; cursor:pointer; }
.team img { width: 60px; height:60px; display:block; margin:0 auto; }
.team-name { margin-top:5px; font-weight:bold; }
.score { flex:1; text-align:center; font-size:24px; font-weight:bold; }
.goals { margin-top:10px; display:flex; justify-content:space-between; }
.goal-list { flex:1; font-size:14px; text-align:center; }
button { padding:10px 15px; border:none; border-radius:5px; margin-top:10px; cursor:pointer; }
.bet-section { background:#f7f7f7; padding:10px; border-radius:8px; margin-top:20px;}
.odds { display:flex; justify-content:space-around; margin-bottom:10px; }
.odds div { padding:8px 12px; border:1px solid #ccc; border-radius:5px; cursor:pointer; }
.odds div.selected { background:#3399ff; color:#fff; }
#openBetBtn { position:fixed; bottom:20px; right:20px; background:#28a745; color:#fff; border:none; padding:12px; border-radius:50px; cursor:pointer; z-index:999; }
</style>
</head>
<body>

<div class="container">

  <!-- Live Scoreboard -->
  <div class="card">
    <div class="scoreboard">
      <div class="team" id="teamA">
        <img src="https://i.ibb.co/1fgXH8TQ/file-0000000097cc71f48084d870a69383b2.png" alt="CPE Logo">
        <div class="team-name">CPE</div>
      </div>
      <div class="score" id="score">0 - 0</div>
      <div class="team" id="teamB">
        <img src="https://i.ibb.co/93cfCTfC/file-00000000940871f4bce254a220506af2.png" alt="BMG Logo">
        <div class="team-name">BMG</div>
      </div>
    </div>
    <div class="goals">
      <div class="goal-list" id="goalsA"></div>
      <div class="goal-list" id="goalsB"></div>
    </div>
  </div>

  <!-- Betting Section -->
  <div class="card bet-section">
    <h3>1X2</h3>
    <div class="odds">
      <div data-type="home">1.5</div>
      <div data-type="draw">2.0</div>
      <div data-type="away">2.5</div>
    </div>

    <h3>Over/Under</h3>
    <div class="odds">
      <div data-type="over">0.5</div>
      <div data-type="under">1.5</div>
    </div>

    <h3>GG/NG</h3>
    <div class="odds">
      <div data-type="gg">GG</div>
      <div data-type="ng">NG</div>
    </div>
  </div>

</div>

<button id="openBetBtn">Open Bets</button>

<script>
// ---------- Long press for admin goal ----------
let timer;
function adminGoal(team) {
  let pass = prompt("Enter Admin Password:");
  if(pass === "admin123") {
    let goalName = prompt("Enter goal scorer's name:");
    let time = parseInt(localStorage.getItem("matchTime") || "0");
    let goalEntry = `${goalName} ${time}' âš½`;
    if(team === 'A') {
      let goalsA = JSON.parse(localStorage.getItem("goalsA")||"[]");
      goalsA.push(goalEntry);
      localStorage.setItem("goalsA", JSON.stringify(goalsA));
    } else {
      let goalsB = JSON.parse(localStorage.getItem("goalsB")||"[]");
      goalsB.push(goalEntry);
      localStorage.setItem("goalsB", JSON.stringify(goalsB));
    }
    updateScoreboard();
    sendToMachine();
  }
}

function sendToMachine() {
  // send all info to machine.html via localStorage
  let data = {
    score: document.getElementById("score").innerText,
    goalsA: JSON.parse(localStorage.getItem("goalsA")||"[]"),
    goalsB: JSON.parse(localStorage.getItem("goalsB")||"[]"),
    time: parseInt(localStorage.getItem("matchTime")||"0")
  };
  localStorage.setItem("machineData", JSON.stringify(data));
}

// ---------- Update scoreboard ----------
function updateScoreboard() {
  let goalsA = JSON.parse(localStorage.getItem("goalsA")||"[]");
  let goalsB = JSON.parse(localStorage.getItem("goalsB")||"[]");
  document.getElementById("goalsA").innerHTML = goalsA.join("<br>");
  document.getElementById("goalsB").innerHTML = goalsB.join("<br>");
  document.getElementById("score").innerText = `${goalsA.length} - ${goalsB.length}`;
}

// ---------- Admin long press ----------
document.getElementById("teamA").addEventListener("mousedown", ()=>{timer=setTimeout(()=>{adminGoal('A');},5000);});
document.getElementById("teamA").addEventListener("mouseup", ()=>{clearTimeout(timer);});
document.getElementById("teamB").addEventListener("mousedown", ()=>{timer=setTimeout(()=>{adminGoal('B');},5000);});
document.getElementById("teamB").addEventListener("mouseup", ()=>{clearTimeout(timer);});

// ---------- Betting selection ----------
document.querySelectorAll(".odds div").forEach(el=>{
  el.addEventListener("click", ()=>{
    if(el.classList.contains("selected")) el.classList.remove("selected");
    else el.classList.add("selected");
  });
});

// ---------- Open bets navigation ----------
document.getElementById("openBetBtn").addEventListener("click", ()=>{
  window.open("openbets.html","_blank");
});

// ---------- Initial load ----------
updateScoreboard();
</script>

</body>
</html>
